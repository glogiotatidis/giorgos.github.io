<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>It's around here, somewhere.</title><link href="https://glogiotatidis.github.io/" rel="alternate"></link><link href="https://glogiotatidis.github.io/feeds/misc.atom.xml" rel="self"></link><id>https://glogiotatidis.github.io/</id><updated>2015-04-28T00:00:00+02:00</updated><entry><title>Duplicity scp backend weirdness</title><link href="https://glogiotatidis.github.io/duplicity-scp-backend-weirdness.html" rel="alternate"></link><updated>2015-04-28T00:00:00+02:00</updated><author><name>Giorgos</name></author><id>tag:glogiotatidis.github.io,2015-04-28:duplicity-scp-backend-weirdness.html</id><summary type="html">&lt;p&gt;I'm a big fan of &lt;a href="http://duplicity.nongnu.org/"&gt;Duplicity&lt;/a&gt; and I use to backup my laptop to my office based server over &lt;code&gt;scp&lt;/code&gt; which in its turn encrypts everything with &lt;a href="https://en.wikipedia.org/wiki/EncFS"&gt;EncFS&lt;/a&gt; and syncs everything up to my &lt;a href="http://spideroak.com/"&gt;SpiderOak&lt;/a&gt; account. I was going under a typical maintenance today and I run &lt;code&gt;duplicity collection-status&lt;/code&gt; to see how many backup sets I have.&lt;/p&gt;
&lt;p&gt;Surprisingly duplicity returned only one full backup set more than a year old and no other backup sets. After some digging I found that the returned backup set was indeed the only full set I had but besides that I had many incremental sets. Re-running the collection-status command returns some of the incremental backup sets and running it for a third time I get different -smaller- number of sets. My initial thought was that duplicity broke due to the large number of incremental sets or maybe EncFS cannot handle that many files in the same directory.&lt;/p&gt;
&lt;p&gt;Fortunately duplicity has a very verbose log setting &lt;code&gt;-v 9&lt;/code&gt; which returned interesting SSH logs&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ssh: [chan 1] Sesch channel 1 request ok
ssh: [chan 1] EOF received (1)
ssh: [chan 1] EOF sent (1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I tried the &lt;code&gt;--timeout&lt;/code&gt; flag to increase timeout with no luck. Finally running duplicity with the &lt;code&gt;sftp&lt;/code&gt; backend made the problem go away. All my backup sets were available and nothing strange in the SSH logs. I do not have any hard facts on why I chose to go with &lt;code&gt;scp&lt;/code&gt; backend in the first place but it appears to be less stable compared to &lt;code&gt;sftp&lt;/code&gt;, albeit this is the first time I run into problems with it.&lt;/p&gt;</summary><category term="ops"></category></entry></feed>